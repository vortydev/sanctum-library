<!-- templates/scan.html -->
{% extends 'layout.html' %}

{% block content %}
<h1>Scan</h1>
<p class="muted">Focus the input and scan. Press Enter or click Lookup.</p>

<div class="row flex start">
    <div class="flex col" style="width: calc(max(70%, 600px));">
        <input id="code" placeholder="Scan ISBN / ASINâ€¦" autocomplete="off" />

        <div class="flex full space-between">
            <div class="flex">
                <button id="btnLookup" type="button" class="mb-0">Lookup</button>
                <button id="btnSave" type="button" class="mb-0" disabled>Save</button>
                <button id="btnClear" type="button" class="secondary mb-0">Clear</button>
            </div>

            <div class="flex fit-w">
                <input id="scannerMode" type="checkbox" />
                <label class="muted">Scanner mode</label>
                <div id="scannerDelay" class="hidden flex fit-w">
                    <input id="scannerDelayInput" type="number" min="50" step="50" value="250" style="width:110px"
                        class="mb-0" />
                    <span class="muted">ms</span>
                </div>
            </div>
        </div>
    </div>

    <div class="flex start fit-w">
        <button id="btnRefreshAll" class="secondary">
            ðŸ”„ Refresh all books
        </button>
        <label>
            <input type="checkbox" id="refreshDryRun" checked>
            Dry-run
        </label>

        <section id="refreshReport" style="display:none; margin-top: 1rem;">
            <h3 style="margin:0 0 .5rem 0;">Refreshed books</h3>
            <div id="refreshList"></div>
        </section>

    </div>
</div>

<div id="status" class="card" style="display:none;"></div>

<div id="preview" class="card" style="display:none;">
    <div class="grid">
        <div>
            <img id="cover" alt="cover" style="display:none;" />
        </div>
        <div>
            <div><strong id="title"></strong></div>
            <div id="meta" class="muted"></div>
            <div id="provider" class="muted"></div>
        </div>
    </div>
</div>

<h3>Raw JSON</h3>
<pre id="raw">{}</pre>

<script type="module" src="/static/js/scan.js"></script>
{% endblock %}